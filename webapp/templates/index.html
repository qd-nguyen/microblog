<!DOCTYPE html>
<html>
<head>
    <title>Meine To-Do-Liste - {{ username }}</title>
</head>
<body>
    <h1>Willkommen, {{ username }}!</h1>
    <h2>Meine To-Do-Liste</h2>

    <!-- Formular zum Hinzufügen einer neuen Aufgabe -->
    <h2>Neue Aufgabe hinzufügen</h2>
    <form method="POST" action="{{ url_for('create_task') }}">
        <label for="title">Aufgabe:</label>
        <input type="text" id="title" name="title" required>
        <br><br>
        <label for="deadline">Deadline:</label>
        <input type="date" id="deadline" name="deadline">
        <br><br>
        <label for="status">Status:</label>
        <select id="status" name="status">
            <option value="offen">Offen</option>
            <option value="in Bearbeitung">In Bearbeitung</option>
            <option value="abgeschlossen">Abgeschlossen</option>
        </select>
        <br><br>
        <input type="submit" value="Aufgabe hinzufügen">
    </form>

    <!-- Anzeigen der Aufgaben nach Status -->
    <h2>Anstehende Aufgaben</h2>
    <h3>Offen</h3>
    <ul>
        {% for task in tasks_open %}
            <li>
                <strong>Titel:</strong> {{ task.title }}<br>
                <strong>Deadline:</strong> {{ task.deadline }}<br>
                <strong>Status:</strong> {{ task.status }}
                <br>
                <a href="{{ url_for('edit_task', task_id=task.id) }}">Bearbeiten</a> |
                <a href="{{ url_for('delete_task', task_id=task.id) }}">Löschen</a>
            </li>
        {% endfor %}
    </ul>

    <h3>In Bearbeitung</h3>
    <ul>
        {% for task in tasks_in_progress %}
            <li>
                <strong>Titel:</strong> {{ task.title }}<br>
                <strong>Deadline:</strong> {{ task.deadline }}<br>
                <strong>Status:</strong> {{ task.status }}
                <br>
                <a href="{{ url_for('edit_task', task_id=task.id) }}">Bearbeiten</a> |
                <a href="{{ url_for('delete_task', task_id=task.id) }}">Löschen</a>
            </li>
        {% endfor %}
    </ul>

    <h3>Abgeschlossen</h3>
    <ul>
        {% for task in tasks_completed %}
            <li>
                <strong>Titel:</strong> {{ task.title }}<br>
                <strong>Deadline:</strong> {{ task.deadline }}<br>
                <strong>Status:</strong> {{ task.status }}
                <br>
                <a href="{{ url_for('edit_task', task_id=task.id) }}">Bearbeiten</a> |
                <a href="{{ url_for('delete_task', task_id=task.id) }}">Löschen</a>
            </li>
        {% endfor %}
    </ul>
</body>
</html>
